all: subml.byte subml.native

MLFILES=io.ml timed.ml ast.ml eval.ml print.ml latex.ml sct.ml \
				raw.ml typing.ml parser.ml subml.ml

subml.native: $(MLFILES)
	ocamlbuild -cflags -w,-3-30 $@

subml.byte: $(MLFILES)
	ocamlbuild -cflags -w,-3-30 $@

run: all
	ledit ./subml.native

test: all
	./subml.native --quit lib/all.typ

clean:
	ocamlbuild -clean

distclean: clean
	rm -f *~ lib/*~ parser.ml
